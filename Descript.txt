Блок констант equ.
Блок переменных (именованных констант).
Блок UDATA.
Вектор Сброса.
Вектор Прерывания.
     Обработчик прерывания по таймеру0.
          Загрузка предуставки в таймер0.
          Инкремент количества тиков. Если флаг метки стоит, то игнорируем.
          Увеличение текущего полуградуса (сдвиинутого на 4 разряда влево).
          Проверка разрешения зажигания.
               Если не разрешено, то идем в конец обработчика прерывания.
          Сравнение текущего угла с заданными углами и включение зажигания.
               Сначала копирование во временные переменные текущего угла, а затем
       для каждого угла проверка на наличие установки зарда (PORTB,Nbit ==0),                 если идет заряд, то расчет продолжается, если не идет заряд, то расчет
                 для этого угла пропускается. Расчет - сравнение текущего угла и
                 заданного. Если сравнялись, то включение зажигания, установка флага
                 следующего угла.
Главная программа.
     Инициализация.
          Сбросы регистров порта, регистров таймера0.
          Настройка порта B.
          Настройка таймера.
          Настройка прерываний.
     Главный цикл.
          Проверка битов перехода. Переход на задачи:
               1. Обработчик внешнего прерывания по флагу. (intHandler)
                    Останов таймера. Копирование значений переменных во временные переменные. Обнуление счетчика тиков. Запуск таймера.
                    Инкремент счетчика зубов.
                    Сброс флага останова.
                    Установка флага разрешения зажигания.
                    Поиск беззубья. Копирование оперируемых предыдущих значений во временные переменные. Увеличение предыдущих значений счетчика тиков в
                      2 раза. Вычитание: значение текущего счетчика тиков минус предыдущее значение х2. Установка флага метки по результату.
                    Запись актуальных (буферных) значений в переменную предыдущих значений счетчика.
                    Если флаг метки стоит (markDetected), то:
                      выполнение блока: обнуление счетчика зубов, сброс флагов номеров зубов, установка флага первого зуба и игнорирование блоков расчета
                      скорости и обнаружения останова.
                      В противном случае пропуск блока обнаружения метки и переход на расчет обнаружения беззубья.
                    Если флаг метки не стоит, то выполняются блоки обнаружения останова (stopSearch) и расчета скорости (calcAnglePerTick).
                    Сброс флага метки.
                    Корректировка угла по таблице соответствия зуба и угла.
               2. Расчет угла заряда и включение заряда катушек. (chargeSearch)
                    Сравнение текущего угла с заданными углом заряда (chargeSearch) и включение зарядки катушек.
